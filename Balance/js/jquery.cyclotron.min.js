!function(o){o.fn.cyclotron=function(n){return this.each(function(){function t(){0===f.continuous&&(g>-s&&(c=1===f.autorotation?-c:0,s=-g),-s>d&&(c=1===f.autorotation?-c:0,s=-d))}var i,e,a,u,r,c=0,s=0,m=[],d=0,g=0
i=o(this)
var f=o.extend({dampingFactor:.93,historySize:5,autorotation:0,continuous:1},n)
if((f.dampingFactor>1||f.dampingFactor<0)&&("object"==typeof console&&console.log("dampingFactor out of range "+f.dampingFactor),f.dampingFactor=.93),1===f.continuous&&i.hasClass("nonContinuous")&&(f.continuous=0),0===f.continuous){var p=i.css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,""),w=new Image
o(w).load(function(){d=w.width-i.width()}),w.src=p}0!=f.autorotation&&(a=!1,c=f.autorotation),i.bind("touchstart mousedown",function(o){var n=o.pageX>0?o.pageX:o.originalEvent.touches[0].pageX
e=n-s,a=!0,o.preventDefault()}),i.bind("touchmove mousemove",function(o){if(a){var n=o.pageX>0?o.pageX:o.originalEvent.touches[0].pageX
void 0===r&&(r=n),s=n-e,m.length>f.historySize&&m.shift(),m.push(r-n),t(),i.css("background-position",s),r=n}}),i.bind("mouseleave mouseup touchend",function(){if(a){for(var o=m.length,n=m[o-1],t=0;o>t;t++)n=(n*o+m[t])/(o+1)
c=n}a=!1}),u=function(){a||0===c||(c*=f.dampingFactor,s-=c,t(),i.css("background-position",s),Math.abs(c)<.001&&(c=0))},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){window.setTimeout(o,100/6)}}(),function h(){requestAnimFrame(h),u()}()})}}(jQuery),jQuery(document).ready(function(){$(".cyclotron").cyclotron()})
